# Disable USB autosuspend for gaming peripherals
# Keep power saving enabled for unused ports/devices

# ========================================
# Gaming Mice (disable autosuspend)
# ========================================
# Logitech (common gaming mice)
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="046d", ATTR{idProduct}=="c08[0-9a-f]", TEST=="power/control", ATTR{power/control}="on"
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="046d", ATTR{idProduct}=="c53[0-9a-f]", TEST=="power/control", ATTR{power/control}="on"

# Razer
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="1532", TEST=="power/control", ATTR{power/control}="on"

# Corsair
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="1b1c", TEST=="power/control", ATTR{power/control}="on"

# SteelSeries
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="1038", TEST=="power/control", ATTR{power/control}="on"

# Glorious (Model O/D)
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="258a", TEST=="power/control", ATTR{power/control}="on"

# ========================================
# Gaming Keyboards (disable autosuspend)
# ========================================
# Mechanical keyboards with RGB/macros
ACTION=="add", SUBSYSTEM=="usb", ATTR{interface}=="*Gaming*", TEST=="power/control", ATTR{power/control}="on"
ACTION=="add", SUBSYSTEM=="usb", ATTR{interface}=="*Mechanical*", TEST=="power/control", ATTR{power/control}="on"

# ========================================
# Game Controllers (disable autosuspend)
# ========================================
# Xbox controllers
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="045e", ATTR{idProduct}=="02[0-9a-f][0-9a-f]", TEST=="power/control", ATTR{power/control}="on"

# Nintendo Switch Pro Controller
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="057e", ATTR{idProduct}=="2009", TEST=="power/control", ATTR{power/control}="on"

# PlayStation controllers
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="054c", TEST=="power/control", ATTR{power/control}="on"

# Sony PlayStation Strikepack; USB
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="05c5", MODE="0660", TAG+="uaccess"

# Sony PlayStation DualShock 3; Bluetooth; USB
KERNEL=="hidraw*", KERNELS=="*054C:0268*", MODE="0660", TAG+="uaccess"
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="0268", MODE="0660", TAG+="uaccess"
## Motion Sensors
SUBSYSTEM=="input", KERNEL=="event*|input*", KERNELS=="*054C:0268*", TAG+="uaccess"

# Sony PlayStation DualShock 4; Bluetooth; USB
KERNEL=="hidraw*", KERNELS=="*054C:05C4*", MODE="0660", TAG+="uaccess"
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="05c4", MODE="0660", TAG+="uaccess"

# Sony PlayStation DualShock 4 Slim; Bluetooth; USB
KERNEL=="hidraw*", KERNELS=="*054C:09CC*", MODE="0660", TAG+="uaccess"
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="09cc", MODE="0660", TAG+="uaccess"

# Sony PlayStation DualShock 4 Wireless Adapter; USB
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="0ba0", MODE="0660", TAG+="uaccess"

# Sony DualSense Wireless-Controller; Bluetooth; USB
KERNEL=="hidraw*", KERNELS=="*054C:0CE6*", MODE="0660", TAG+="uaccess"
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="0ce6", MODE="0660", TAG+="uaccess"

# Sony DualSense Edge Wireless-Controller; Bluetooth; USB
KERNEL=="hidraw*", KERNELS=="*054C:0DF2*", MODE="0660", TAG+="uaccess"
KERNEL=="hidraw*", ATTRS{idVendor}=="054c", ATTRS{idProduct}=="0df2", MODE="0660", TAG+="uaccess"

# ========================================
# VR Headsets (disable autosuspend)
# ========================================
# Valve Index
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="28de", TEST=="power/control", ATTR{power/control}="on"

# Meta Quest
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="2833", TEST=="power/control", ATTR{power/control}="on"

# HTC Vive
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", ATTR{idProduct}=="2c87", TEST=="power/control", ATTR{power/control}="on"

# ========================================
# USB Hubs with Peripherals (disable autosuspend)
# ========================================
# Powered hubs with gaming devices
ACTION=="add", SUBSYSTEM=="usb", ATTR{bDeviceClass}=="09", ATTR{bMaxPower}=="0", TEST=="power/control", ATTR{power/control}="on"

# ========================================
# Allow autosuspend for everything else
# ========================================
# Bluetooth adapters, webcams, card readers, etc.  will auto-suspend after 2s
# This is controlled by usbcore.autosuspend=2 kernel parameter
