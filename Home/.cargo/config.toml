[unstable]
unstable-options = true
git = true
gitoxide = true
avoid-dev-deps = true
no-embed-metadata = true
trim-paths = true
#build-std = ["std", "panic_abort"]
#build-std-features = ["panic_immediate_abort"]

[alias]
b ="build -r"
i ="install"
rr="run -r"

[build]
rustc-wrapper = "sccache"
incremental = false
rustflags = ["-Ctarget-cpu=native", "-Clink-arg=-fuse-ld=lld", "-Zthreads=16"]

[env]
RUSTC_BOOTSTRAP="1"
RUST_PANIC_STRATEGY="abort"
RUST_LIB_BACKTRACE="0"
RUSTC_LOG="off"
MALLOC_CONF="metadata_thp:auto,tcache:true,background_thread:true,percpu_arena:percpu,dirty_decay_ms:0,muzzy_decay_ms:0"
_RJEM_MALLOC_CONF="metadata_thp:auto,tcache:true,background_thread:true,percpu_arena:percpu,dirty_decay_ms:0,muzzy_decay_ms:0"
GITOXIDE_CORE_MULTIPACKINDEX="true"
SCCACHE_DIRECT="true"
SCCACHE_IDLE_TIMEOUT="10800"

[cache]
auto-clean-frequency="7 days"

[cache.global-clean]
max-src-age   ="1 month"
max-crate-age ="2 months"
max-index-age ="2 months"
max-git-co-age="1 month"
max-git-db-age="1 months"

[http]
timeout=30
check-revoke=false
multiplexing=true
low-speed-limit=10

[net]
git-fetch-with-cli=false
retry=2

[resolver]
incompatible-rust-versions="allow"

[profile.release]
opt-level = 3
codegen-units =1
lto = true
strip = true
panic = "abort"
debug = 0
debug-assertions = false
overflow-checks = false
rpath = false

[profile.dev]
opt-level=0
codegen-units=256
incremental=true
debug = 0
split-debuginfo = "packed"

[profile.release.build-override]
inherits="release"
opt-level=0
codegen-units=256
incremental=true
debug = 0

[target.x86_64-unknown-linux-gnu]
linker="clang"
rustflags = ["-Ctarget-cpu=native", "-Clink-arg=-fuse-ld=lld", "-Zthreads=16"]

[term]
color="auto"
progress.when="auto"
progress.term-integration=true
