id: ts-critical-errors
language: typescript
severity: error
message: Critical error pattern
note: 'console/debugger in production, eval/Function constructor, var keyword'
rule:
  any:
    - kind: member_expression
      pattern: console.$METHOD
      has:
        kind: property_identifier
        regex: ^(log|debug|info|warn|error)$
    - kind: debugger_statement
    - pattern: eval($EXPR)
    - pattern: new Function($$$ARGS)
    - pattern: setTimeout($STRING, $$$)
      has:
        kind: string
    - kind: variable_declaration
      pattern: var $VAR = $INIT
fix: |
  
  let $VAR = $INIT
---
id: ts-strict-equality
language: typescript
severity: error
message: Use === instead of == (avoid type coercion)
note: '== performs implicit type coercion: "5" == 5 is true'
rule:
  kind: binary_expression
  any:
    - pattern: $A == $B
    - pattern: $A != $B
fix: |
  $A === $B
  $A !== $B
