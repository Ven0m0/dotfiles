# Soar Package Manager Configuration
# Docs: https://soar.qaidvoid.dev

default_profile = "default"

# Paths - XDG-compliant
cache_path = "~/.cache/soar"
db_path = "~/.local/share/soar/db"
bin_path = "~/.local/bin"
repositories_path = "~/repos"
portable_dirs = "~/portable-dirs"

# Performance tuning
parallel = true
parallel_limit = 32   # Increased for better CPU utilization
ghcr_concurrency = 24 # Bumped for faster GitHub Container Registry ops
search_limit = 100    # More results for better discoverability

# Network & reliability
timeout = 600           # 10min for large downloads
retry_attempts = 5      # More resilient
retry_delay = 3         # Slightly longer backoff
connection_timeout = 30 # Per-connection timeout
max_redirects = 10

# Caching strategy
use_cache = true
compress_cache = true
cache_ttl = 14400       # 4h cache validity
verify_checksums = true
strict_checksum = true  # Fail on mismatch

# Repository behavior
cross_repo_updates = true # Enable cross-repo package updates
auto_sync = true          # Auto-sync repos on install/update
sync_on_startup = false   # Manual control

# Installation filters (exclude docs/tests/metadata)
install_patterns = [
  "!*.log",
  "!*.txt",
  "!*.md",
  "! *.rst",
  "!*. adoc",
  "! SBUILD",
  "!*. json",
  "!*.version",
  "!*.yml",
  "!*.yaml",
  "!*. toml",
  "!LICENSE*",
  "! COPYING*",
  "!README*",
  "!CHANGELOG*",
  "!CHANGES*",
  "!NEWS*",
  "!CONTRIBUTING*",
  "!AUTHORS*",
  "! THANKS*",
  "!*.example",
  "!*.sample",
  "!*.test",
  "!*.spec",
  "!*. desktop. bak",
  "!docs/**",
  "!documentation/**",
  "!examples/**",
  "!tests/**",
  "!test/**",
  "!. github/**",
  "!. git/**",
  "!*. bak",
  "!*.orig",
  "!*.rej",
]

# Logging
log_level = "info"                        # Options: trace, debug, info, warn, error
log_file = "~/.local/share/soar/soar.log"
log_rotation = true
max_log_size = 10485760                   # 10MB

[profile.default]
root_path = "~"
packages_path = "~/packages"

# High-priority repositories (frequently updated, well-maintained)
[[repositories]]
name = "pkgcache"
url = "https://meta.pkgforge.dev/pkgcache/x86_64-Linux.sdb.zstd"
desktop_integration = true
pubkey = "https://meta.pkgforge.dev/pkgcache/minisign.pub"
enabled = true
signature_verification = true
sync_interval = "2h"                                             # More frequent updates for main repo
priority = 100
metadata_cache = true

[[repositories]]
name = "bincache"
url = "https://meta.pkgforge.dev/bincache/x86_64-Linux.sdb.zstd"
desktop_integration = false
pubkey = "https://meta.pkgforge. dev/bincache/minisign.pub"
enabled = true
signature_verification = true
sync_interval = "3h"
priority = 90
metadata_cache = true

# Community repositories
[[repositories]]
name = "ivan-hc-am"
url = "https://meta.pkgforge.dev/external/am/x86_64-Linux.sdb.zstd"
desktop_integration = true
enabled = true
signature_verification = true
sync_interval = "6h"
priority = 80
metadata_cache = true

[[repositories]]
name = "appimage-github-io"
url = "https://meta.pkgforge. dev/external/appimage.github.io/x86_64-Linux.sdb.zstd"
desktop_integration = true
enabled = true
signature_verification = true
sync_interval = "6h"
priority = 70
metadata_cache = true

# Language-specific repositories (opt-in for development use)
[[repositories]]
name = "pkgforge-cargo"
url = "https://meta.pkgforge.dev/external/pkgforge-cargo/x86_64-Linux.sdb.zstd"
desktop_integration = false
enabled = false                                                                 # Enable only if needed
signature_verification = true
sync_interval = "12h"
priority = 50
metadata_cache = false

[[repositories]]
name = "pkgforge-go"
url = "https://meta.pkgforge.dev/external/pkgforge-go/x86_64-Linux.sdb.zstd"
desktop_integration = false
enabled = false                                                              # Enable only if needed
signature_verification = true
sync_interval = "12h"
priority = 50
metadata_cache = false

# Desktop integration settings
[desktop_integration]
create_desktop_entries = true
install_icons = true
update_mime_database = true
update_desktop_database = true
icon_theme = "hicolor"

# Update behavior
[updates]
auto_update = false         # Manual control recommended
check_interval = "24h"
parallel_updates = true
backup_before_update = true
keep_old_versions = 1

# Download optimization
[download]
max_concurrent_downloads = 8
chunk_size = 8388608         # 8MB chunks
resume_downloads = true
prefer_mirrors = true

# Cleanup policies
[cleanup]
auto_cleanup = true
keep_cache_days = 7
keep_old_packages = 2
remove_orphaned_deps = true

# Security
[security]
allow_unsigned = false     # Strict signature enforcement
gpg_verify = true
minisign_verify = true
trust_on_first_use = false

# Advanced features
[experimental]
zstd_compression = true
parallel_extraction = true
delta_updates = false      # Not widely supported yet
lazy_extraction = false
