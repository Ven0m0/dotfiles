# Mise Configuration - Optimized for Performance
# https://mise.jdx.dev/configuration.html
[settings]
experimental = true
color = true
yes = true
quiet = true
auto_install = true
jobs = 12
lockfile = true
activate_aggressive = true
raw = false
gix = true
go_skip_checksum = true
system_config_file = "~/.config/mise/config.toml"
cache_prune_age = "7d"

[settings.python]
compile = true
precompiled_os = "x86_64_v3"
uv_venv_auto = true
uv_venv_create_args = ["--system-site-packages"]
venv_create_args = ["--system-site-packages"]

[settings.pipx]
uvx = true

[settings.cargo]
binstall = true

[settings.npm]
bun = true

[settings.node]
compile = true

[settings.aqua]
baked_registry = true

[settings.ruby]
ruby_build_opts = "--enable-shared"

# Tools Configuration
[tools]
java = ["oracle-graalvm", "temurin"]
"github:zeroBzeroT/ChunkCleaner" = "latest"
cpz = "latest"
rmz = "latest"
# Cargo utilities
"cargo:cargo-alias-exec" = "latest"
"cargo:cargo-syu" = "latest"
"cargo:cargo-list" = "latest"
"cargo:cargo-fresh" = "latest"
"cargo:cargo-minify" = "latest"
"cargo:cargo-diet" = "latest"
"cargo:cargo-mommy" = "latest"
"cargo:shell-mommy" = "latest"
# Image optimization tools
"cargo:image-find" = "latest"
"cargo:rimage" = { version = "latest", features = "build-binary", default-features = true }
"cargo:https://github.com/Blobfolio/flaca" = "latest"
"cargo:image-optimizer" = "latest"
"cargo:pixelsqueeze" = "latest"
"cargo:imagineer" = "latest"
"cargo:imgc" = "latest"
"cargo:icu_tool" = "latest"
# Compression tools
"cargo:compresscli" = "latest"
"cargo:ripunzip" = "latest"
# Video tools
"cargo:ffzap" = "latest"
"cargo:ab-av1" = "latest"
"cargo:vicut" = "latest"
"cargo:bgone" = "latest"
"cargo:youtube-tui" = "latest"
"cargo:rumdl" = "latest"
"cargo:mpatch" = "latest"
"cargo:frep" = "latest"
"cargo:ripuniq" = "latest"
"cargo:dedup" = "latest"
"cargo:dupe-krill" = "latest"
"cargo:xcp" = "latest"
"cargo:filerefine" = "latest"
"cargo:clean_git_history" = "latest"
"cargo:build-clean" = "latest"
"cargo:rmrfrs" = "latest"
"cargo:https://github.com/fthomys/update-alternatives" = "latest"
"cargo:caligula" = "latest"
"cargo:roxide" = "latest"
"cargo:submod" = "latest"
"cargo:nvidia_oc" = "latest"
"cargo:etchdns" = "latest"
"cargo:terminal_tools" = "latest"
"cargo:dui-cli" = "latest"
"cargo:kanata" = "latest"
"cargo:https://github.com/vishruth-thimmaiah/converse" = "latest"
#oxlint = "latest"

[env]
_.python.venv = { path = ".venv" }
UV_LINK_MODE = "hardlink"
UV_COMPILE_BYTECODE = "1"
UV_CONCURRENT_DOWNLOADS = "12"
UV_CONCURRENT_INSTALLS = "8"
DO_NOT_TRACK = "1"
MISE_NODE_NINJA = "true"
MISE_NODE_CONCURRENCY = "16"
NODE_OPTIONS = "--max-old-space-size=8192"
NODE_SKIP_PLATFORM_CHECK = "1"
NODE_PRESERVE_SYMLINKS = "1"
NODE_TLS_REJECT_UNAUTHORIZED = "0"
UV_THREADPOOL_SIZE = "16"
NODE_NO_WARNINGS = "1"
CURL_OPTS = "-fLSs --http2 --compressed --tlsv1.2"
CARGO_NET_GIT_FETCH_WITH_CLI = "true"
CARGO_HTTP_MULTIPLEXING = "true"
BINSTALL_DISABLE_TELEMETRY = "true"
RUSTC_WRAPPER = "sccache"
SCCACHE_DIRECT = "true"
CMAKE_BUILD_TYPE = "Release"
CMAKE_GENERATOR = "Ninja"
GITOXIDE_CORE_MULTIPACKINDEX = "true"
GIT_PROTOCOL = "version 2"
PYTHONOPTIMIZE = "2"
PYTHON_JIT = "1"
# Task definitions
[tasks.clean]
description = "Clean cargo and cache directories"
depends = ['cleancache']
run = "cargo cache -efg || :; cargo clean || :"

[tasks.cleancache]
description = "Clean system cache"
run = "rm -rf ~/.cache/* || :"
hide = true

[tasks.update]
description = "Update all mise tools"
run = "mise up -y || :; mise prune -y || :"
